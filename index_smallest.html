<input type=file><br><textarea></textarea><script>u=(s)=>window.btoa(unescape(encodeURIComponent(s)));h=(e)=>{r=new FileReader(),p=f.files[0];if(p.type.substr(0,4)=='text'){r.onloadend=(e)=>t.value=`data:${p.type};base64,${u(e.target.result)}`;r.readAsText(p)}else{r.onloadend=()=>t.value=r.result;r.readAsDataURL(p)}};$=(s)=>document.querySelector(s),t=$("textarea"),f=$("input");f.onchange=h</script>